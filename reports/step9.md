### Step9实验报告

2018013443 陈新 计82

#### 实验内容

step9需要增添函数支持，因此需要增添一个函数信息的列表，记录函数名、参数个数以及类型、是否定义过函数体、是否使用过等参数

遇到函数的声明，则记录其函数名、参数个数、类型，未定义过函数体；

遇到函数的定义，则记录其函数名、参数个数、类型，定义过函数体；

先后遇到相同函数名的函数声明/定义，若参数个数不同、类型不对应（尽管现在全部是int），均视为非法行为，即暂时不考虑不同参数的同名函数

先后遇到参数相同、类型相同的同名函数声明/定义，只有以下两种情况合法：先声明后定义、两个均为声明。

现在检查函数未定义的情况，只判断了使用过但未定义的函数非法，未使用过但只声明的函数算合法（考虑到外部定义的问题，即使作业不会遇到）



使用函数时，由于参数类型全部默认为int而只检查参数个数，不使用寄存器传参，依次将参数从右向左压栈，然后call函数并存下返回地址

---------------------

#### 思考题

1. MiniDecaf 的函数调用时参数求值的顺序是未定义行为。试写出一段 MiniDecaf 代码，使得不同的参数求值顺序会导致不同的返回结果。

   ```c++
   int plus(int a, int b){
       return a+b;
   }
   
   int main(){
       int a = 1;
       int b = 2;
       return plus(a=b+1, b=a+1);
   }
   ```

   