### Step6实验报告

2018013443 陈新 计82

#### 实验内容

step6要实现if语句和三元条件表达式。

if的判断和三元条件表达式的判断条件都被视为expression，最终计算出一个值并默认将其看待为boolean值，等于0代表false，非0代表true

因此只需要看计算出的判断expression，如果等于0则代表要跳过then的语句进入else，管理好lable并用beqz实现即可。

带else的if语句，多一个尾部label，如果判断expression为true要运行then的语句，就要跳过else部分，跳转至尾部label即可。

因为在建立语法树的时候优先匹配then语句，因此按照指导书上的方法解决了悬吊else问题，else优先匹配左侧最近的没有else的if语句。

---------------------

#### 思考题

1. Rust 和 Go 语言中的 if-else 语法与 C 语言中略有不同，它们都要求两个分支必须用大括号包裹起来，而且条件表达式不需要用括号包裹起来。请问相比 C 的语法，这两种语言的语法有什么优点？

   C语言if的括号能明确条件表达式的范围，因此可以不加大括号（python的冒号起到了相同的分割作用）；Rust语言if不加括号，没有任何分割符，就必须加大括号。例如

   ```c
   if (1)
       *a = 2;
   ```

   防止取值符被解读为乘号

   rust的强制性大括号能够清晰地表现if-else的归属关系，防止逻辑混乱；c不需要强制大括号，使用方法更加灵活，短代码、无嵌套if时不加大括号能缩短代码行数，并且可以节约开新作用域和变量表的时间，理论上运行速度会更快

